{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport * as TodayPreviewActions from './store/today-preview.actions';\nimport * as SearchActions from '../search/store/search.actions';\nlet TodayPreviewComponent = class TodayPreviewComponent {\n  constructor(store) {\n    this.store = store;\n    this.weatherForecast = [];\n  }\n  ngOnInit() {\n    this.dateTime = new Date();\n    this.storeSubscription = this.store.select('todayPreview').subscribe(responseData => {\n      this.location = responseData.location;\n      this.error = responseData.error;\n      this.weatherForecast = responseData.weather;\n      this.isLoading = responseData.isLocalising;\n      if (this.weatherForecast) {\n        this.todayWeather = this.weatherForecast[0];\n      }\n      console.log(this.weatherForecast);\n      this.temperatureScaleCelsius = responseData.isCelsius;\n    });\n  }\n  ngAfterContentInit() {\n    if (!this.weatherForecast) {\n      this.onGeolocalisation();\n    }\n  }\n  ngOnDestroy() {\n    this.storeSubscription.unsubscribe();\n  }\n  onSearch() {\n    this.store.dispatch(new SearchActions.SearchModeOn());\n  }\n  onGeolocalisation() {\n    this.store.dispatch(new TodayPreviewActions.StartLocation());\n    navigator.geolocation.getCurrentPosition(position => {\n      this.showPosition(position);\n    }, error => {\n      this.showError(error);\n    });\n  }\n  showPosition(position) {\n    this.latt = position.coords.latitude;\n    this.long = position.coords.longitude;\n    this.store.dispatch(new TodayPreviewActions.FindLocationDetails({\n      latt: this.latt,\n      long: this.long\n    }));\n  }\n  showError(error) {\n    if (error) {\n      this.error = 'It is not possible to geolocalize you. Please use the Search button to find tour position.';\n    }\n  }\n};\nTodayPreviewComponent = __decorate([Component({\n  selector: 'app-today-preview',\n  templateUrl: './today-preview.component.html',\n  styleUrls: ['./today-preview.component.scss'],\n  standalone: False\n})], TodayPreviewComponent);\nexport { TodayPreviewComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}